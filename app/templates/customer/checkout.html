{% extends 'customer/base.html' %}

{% block title %}Checkout{% endblock %}

{% block content %}




<div class="container-fluidrow row d-flex justify-content-start mt-5">
  <div class="col-lg-5 col-md-5 d-none d-md-block"> <img src="../../static/img/gif.gif" alt="" class="checkout-img"></div>
  <div class="col-lg-6 col-md-6 col-sm-12" >
  <div class="accordion  shadow" id="accordionPanelsStayOpenExample">
      <div class="accordion-item ">
        <h2 class="accordion-header">
          <button class="accordion-button accordion-button1" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
            <i class="bi bi-check-circle check1" style="display: none;"></i> &nbsp; Order Summary
          </button>
        </h2>
        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show" data-bs-parent="#accordionPanelsStayOpenExample">
          <div class="accordion-body p-1">
          <table class="table table-responsive table-bordered table-hover">
              <tbody>
                  <tr>
                      <td><img src="../../static/img/Laptop3.jpg" class="product-img" alt="Product Image" height="67px" width="67px"></td>
                      <td class="text-primary">Product Name</td>
                      <td class="text-success">₹ 1990.00</td>
                      <td>
                          <select class="form-select">
                              <option selected>Qnt</option>
                              <option value="1">1</option>
                              <option value="2">2</option>
                              <option value="3">3</option>
                          </select>
                      </td>
                      <td class="text-success">₹ 1990.00</td>
                  </tr>
              </tbody>
              <tfoot class="">
                <tr>
                    <td colspan="4">Delivery Charge</td>
                    <td class="text-success">₹ 50</td>
                </tr>
                <tr>
                    <td colspan="4"><strong>Total Price</strong></td>
                    <td class="text-success">₹ 1990</td>
                </tr>
            </tfoot>
          </table>

          <div class="container text-center">
            <p><input type="checkbox" name="have_coupon" id="have_coupon"> <label for="have_coupon">I have a Coupon Code</label></p>
          </div>
          
          <div id="check_have_coupon" style="display: none;">
          <div class="container d-flex justify-content-center">
          <div class="input-group mt-3 w-50">
            <input type="text" class="form-control w-25  rounded-start-pill" name="coupon_code" placeholder="Enter Coupon Code" aria-label="Enter Coupon Code " aria-describedby="button-addon2"> 
             <button type="submit" class="btn btn-success " id="button-addon2" style="border-radius: 0 999px 999px 0;">Submit</button>
          </div>
          </div>
          <div class="text-center me-5"><small>Invalied Coupon Code</small></div>

            <div class="separation-line mt-3"></div>
            <div class="total-section flex-between flex-vertical-center">
              <div class="flex-fill flex-vertical">
                <div class="text-center"><h6 class="text-success">Congratulations ! The coupon has been successfully applied.</h6></div>
                <div class="total-label f-secondary-color text-center">Now You have to Pay</div>
                <div class="text-center">
                  <strong>₹ 549</strong>
                  <small>.00</small>
                </div>
              </div>
              <i class="ai-coin size-lg"></i>
            </div>
          </div>

          <div class="d-flex justify-content-end mt-3">
              <button class="btn btn-success first-btn m-3">Next</button>
          </div>
          
          </div>

        </div>
      </div>


    


      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed accordion-button2" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
            <i class="bi bi-check-circle check2" style="display: none;"></i> &nbsp; Shipping Address
          </button>
        </h2>
        <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" data-bs-parent="#accordionPanelsStayOpenExample">
       
          <div class="accordion-body">
            <div class="user border shadow-sm p-3 bg-body-tertiary">
              <strong class="pe-1">User Name:</strong> Arif
              <br><strong class="pe-1">Email:</strong> arif@gmail.com
              <br><strong class="pe-1">Address:</strong> 31, Abcd xyz, coochbehar, Coochbehar, 736101
              <br><strong class="pe-1">Contact No:</strong> 629630002
            </div>
              <br><strong class="ps-5"><input type="checkbox" name="new-address" id="addressCheckbox"> <label for="addressCheckbox">Address Is not Same as User Address</label></strong>
            
              <div class=" justify-content-end" id="user-addr-btn" style="display: flex;">
                <button class="btn btn-success second-btn m-3">Next</button>
             </div>
              <div id="newAddressForm" style="display: none;" class="mt-3 border shadow-sm p-3 bg-body-tertiary">
                <h5 class="pb-3 text-center"><strong>Enter New Address</strong></h5>
                <div class="row">
                    <div class="col-6 mb-3">
                        <label for="fullname" class="form-label">Full Name</label>
                        <input type="text" class="form-control" name="fullname" placeholder="Enter Full Name Here">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="MobleNo" class="form-label">Mobile No.</label>
                        <input type="text" class="form-control" id="MobleNo" name="MobileNo" placeholder="Enter Mobile No">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="newCity" class="form-label">Street Address</label>
                        <input type="text" class="form-control" id="StreetAddress" name="StreetAddress" placeholder="Flat/House No./Floor/Building/Street">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="Landmark" class="form-label">Landmark</label>
                        <input type="text" class="form-control" id="Landmark" name="Landmark" placeholder="Enter Landmark Here">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="AdditionalAddress" class="form-label">Additional Address</label>
                        <input type="text" class="form-control" id="AdditionalAddress" name="Additional Address" placeholder="colony/Locality">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="City" class="form-label">City</label>
                        <input type="text" class="form-control" id="City" name="City" placeholder="Enter City/Village Name Here">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="PinCode" class="form-label">Pin Code</label>
                        <input type="text" class="form-control" id="PinCode" name="PinCode" placeholder="Enter 6 Digit Pin Code">
                    </div>
                    <div class="col-6 mb-3">
                        <label for="PinCode" class="form-label">State</label>
                        <input type="text" class="form-control" id="State" name="State" placeholder="Enter State Here">
                    </div>
                  </div>
               <div class="d-flex justify-content-end">
                   <button class="btn btn-success m-3 second-btn-2">Next</button>
                </div>

            </div>
    
            
            
            </div>

        </div>
      </div>
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button collapsed accordion-button3" type="button" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
            <i class="bi bi-check-circle check3" style="display: none;"></i> &nbsp; Payment Method
          </button>
        </h2>
        <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" data-bs-parent="#accordionPanelsStayOpenExample">
          <div class="accordion-body">
            <strong>Please select the preferred payment method to use on this order.</strong> 
            <br>
            <div class="d-block">
            <input type="radio" name="pay-method" id="Online" ><label for="Online"> &nbsp; Payment by UPI/Wallet/Debit & Credit Card</label>
            </div>
            <input type="radio" name="pay-method" id="COD"><label for="COD"> &nbsp; Payment by COD</label>
           <div class="d-flex justify-content-end">
            <button class="btn btn-success m-3 third-btn">Place Order</button>
           </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<script>
    // Get references to the checkbox and the new address form
    const addressCheckbox = document.getElementById('addressCheckbox');
  const newAddressForm = document.getElementById('newAddressForm');
  const userAddressForm = document.getElementById('user-addr-btn');

  // Add an event listener to the checkbox
  addressCheckbox.addEventListener('change', function() {
      // Toggle the visibility of the new address form based on the checkbox state
      newAddressForm.style.display = addressCheckbox.checked ? 'block' : 'none';
      userAddressForm.style.display = addressCheckbox.checked ? 'none' : 'flex';
  });




document.addEventListener('DOMContentLoaded', function() {
// Get references to the "Next" buttons
const nextButton1 = document.querySelector('.first-btn');
const nextButton2 = document.querySelector('.second-btn');
const nextButton2copy = document.querySelector('.second-btn-2');
const nextButton3 = document.querySelector('.third-btn');
const check1 = document.querySelector('.check1');
const check2 = document.querySelector('.check2');
const check3 = document.querySelector('.check3');
const paymentMethodRadioGroup = document.getElementsByName('pay-method');


// Get references to the accordion panels
const accordion1 = document.querySelector('#panelsStayOpen-collapseOne');
const accordion2 = document.querySelector('#panelsStayOpen-collapseTwo');
const accordion3 = document.querySelector('#panelsStayOpen-collapseThree');


const accordionButton1 = document.querySelector('.accordion-button1');
const accordionButton2 = document.querySelector('.accordion-button2');
const accordionButton3 = document.querySelector('.accordion-button3');

// Initialize the state of the second and third accordion panels as locked
let isAccordion2Locked = true;
let isAccordion3Locked = true;



// Add click event listener to the first "Next" button
nextButton1.addEventListener('click', function() {
  // Close the first accordion panel and remove active color
  accordion1.classList.remove('show');
  check1.style.display = 'block';

 
  accordionButton1.classList.add('collapsed');
  // Unlock and open the second accordion panel
  if (isAccordion2Locked) {
      isAccordion2Locked = false;
      accordionButton2.classList.remove('collapsed');
      accordion2.classList.add('show');
  }
});

// Add click event listener to the second "Next" button
nextButton2.addEventListener('click', function() {
  // Close the second accordion panel and remove active color
  accordion2.classList.remove('show');
  check2.style.display = 'block';
  accordionButton2.classList.add('collapsed');
  // Unlock and open the third accordion panel
  if (isAccordion3Locked) {
      isAccordion3Locked = false;
      accordionButton3.classList.remove('collapsed');
      accordion3.classList.add('show');
  }
});


nextButton2copy.addEventListener('click', function() {
  // Close the second accordion panel and remove active color
  accordion2.classList.remove('show');
  check2.style.display = 'block';
  accordionButton2.classList.add('collapsed');

  // Unlock and open the third accordion panel
  if (isAccordion3Locked) {
      isAccordion3Locked = false;
      accordionButton3.classList.remove('collapsed');
      accordion3.classList.add('show');
  }
});

for (const radioButton of paymentMethodRadioGroup) {
radioButton.addEventListener('change', () => {
  check3.style.display = 'block';
});
}

// Prevent default toggling of accordion panels for locked panels
document.querySelector('#accordionPanelsStayOpenExample').addEventListener('show.bs.collapse', function(event) {
  const target = event.target;
  if ((target === accordion2 && isAccordion2Locked) || (target === accordion3 && isAccordion3Locked)) {
      // Prevent the accordion panel from opening if it is locked
      event.preventDefault();
  }
});
});




const coupon = document.getElementById('have_coupon');
const dis_coupon = document.getElementById('check_have_coupon');

coupon.addEventListener('change', function() {
dis_coupon.style.display = coupon.checked ? 'none' : 'block';
dis_coupon.style.display = coupon.checked ? 'block' : 'none';
  });

</script>


{% endblock %}